{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\XIE\\\\MAD\\\\n2\\\\invoice-generator\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar WOFF = 'application/font-woff';\nvar JPEG = 'image/jpeg';\nvar mimes = {\n  woff: WOFF,\n  woff2: WOFF,\n  ttf: 'application/font-truetype',\n  eot: 'application/vnd.ms-fontobject',\n  png: 'image/png',\n  jpg: JPEG,\n  jpeg: JPEG,\n  gif: 'image/gif',\n  tiff: 'image/tiff',\n  svg: 'image/svg+xml'\n};\nexport function getExtension(url) {\n  var match = /\\.([^./]*?)$/g.exec(url);\n  return match ? match[1] : '';\n}\nexport function getMimeType(url) {\n  var extension = getExtension(url).toLowerCase();\n  return mimes[extension] || '';\n}\nexport function resolveUrl(url, baseUrl) {\n  // url is absolute already\n  if (url.match(/^[a-z]+:\\/\\//i)) {\n    return url;\n  } // url is absolute already, without protocol\n\n\n  if (url.match(/^\\/\\//)) {\n    return window.location.protocol + url;\n  } // dataURI, mailto:, tel:, etc.\n\n\n  if (url.match(/^[a-z]+:/i)) {\n    return url;\n  }\n\n  var doc = document.implementation.createHTMLDocument();\n  var base = doc.createElement('base');\n  var a = doc.createElement('a');\n  doc.head.appendChild(base);\n  doc.body.appendChild(a);\n\n  if (baseUrl) {\n    base.href = baseUrl;\n  }\n\n  a.href = url;\n  return a.href;\n}\nexport function isDataUrl(url) {\n  return url.search(/^(data:)/) !== -1;\n}\nexport function makeDataUrl(content, mimeType) {\n  return \"data:\".concat(mimeType, \";base64,\").concat(content);\n}\nexport function parseDataUrlContent(dataURL) {\n  return dataURL.split(/,/)[1];\n}\nexport var uuid = function uuid() {\n  // generate uuid for className of pseudo elements.\n  // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n  var counter = 0; // ref: http://stackoverflow.com/a/6248722/2519373\n\n  var random = function random() {\n    return (// eslint-disable-next-line no-bitwise\n      \"0000\".concat((Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4)\n    );\n  };\n\n  return function () {\n    counter += 1;\n    return \"u\".concat(random()).concat(counter);\n  };\n}();\nexport var delay = function delay(ms) {\n  return function (args) {\n    return new Promise(function (resolve) {\n      return setTimeout(function () {\n        return resolve(args);\n      }, ms);\n    });\n  };\n};\nexport function toArray(arrayLike) {\n  var arr = [];\n\n  for (var i = 0, l = arrayLike.length; i < l; i += 1) {\n    arr.push(arrayLike[i]);\n  }\n\n  return arr;\n}\n\nfunction px(node, styleProperty) {\n  var val = window.getComputedStyle(node).getPropertyValue(styleProperty);\n  return parseFloat(val.replace('px', ''));\n}\n\nexport function getNodeWidth(node) {\n  var leftBorder = px(node, 'border-left-width');\n  var rightBorder = px(node, 'border-right-width');\n  return node.clientWidth + leftBorder + rightBorder;\n}\nexport function getNodeHeight(node) {\n  var topBorder = px(node, 'border-top-width');\n  var bottomBorder = px(node, 'border-bottom-width');\n  return node.clientHeight + topBorder + bottomBorder;\n}\nexport function getPixelRatio() {\n  var ratio;\n  var FINAL_PROCESS;\n\n  try {\n    FINAL_PROCESS = process;\n  } catch (e) {// pass\n  }\n\n  var val = FINAL_PROCESS && FINAL_PROCESS.env ? FINAL_PROCESS.env.devicePixelRatio : null;\n\n  if (val) {\n    ratio = parseInt(val, 10);\n\n    if (Number.isNaN(ratio)) {\n      ratio = 1;\n    }\n  }\n\n  return ratio || window.devicePixelRatio || 1;\n}\nexport function canvasToBlob(canvas) {\n  if (canvas.toBlob) {\n    return new Promise(function (resolve) {\n      return canvas.toBlob(resolve);\n    });\n  }\n\n  return new Promise(function (resolve) {\n    var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n    var len = binaryString.length;\n    var binaryArray = new Uint8Array(len);\n\n    for (var i = 0; i < len; i += 1) {\n      binaryArray[i] = binaryString.charCodeAt(i);\n    }\n\n    resolve(new Blob([binaryArray], {\n      type: 'image/png'\n    }));\n  });\n}\nexport function createImage(url) {\n  return new Promise(function (resolve, reject) {\n    var img = new Image();\n\n    img.onload = function () {\n      return resolve(img);\n    };\n\n    img.onerror = reject;\n    img.crossOrigin = 'anonymous';\n    img.decoding = 'sync';\n    img.src = url;\n  });\n}\nexport function svgToDataURL(svg) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", Promise.resolve().then(function () {\n              return new XMLSerializer().serializeToString(svg);\n            }).then(encodeURIComponent).then(function (html) {\n              return \"data:image/svg+xml;charset=utf-8,\".concat(html);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\nexport function nodeToDataURL(node, width, height) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var xmlns, svg, foreignObject;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            xmlns = 'http://www.w3.org/2000/svg';\n            svg = document.createElementNS(xmlns, 'svg');\n            foreignObject = document.createElementNS(xmlns, 'foreignObject');\n            svg.setAttribute('width', \"\".concat(width));\n            svg.setAttribute('height', \"\".concat(height));\n            svg.setAttribute('viewBox', \"0 0 \".concat(width, \" \").concat(height));\n            foreignObject.setAttribute('width', '100%');\n            foreignObject.setAttribute('height', '100%');\n            foreignObject.setAttribute('x', '0');\n            foreignObject.setAttribute('y', '0');\n            foreignObject.setAttribute('externalResourcesRequired', 'true');\n            svg.appendChild(foreignObject);\n            foreignObject.appendChild(node);\n            return _context2.abrupt(\"return\", svgToDataURL(svg));\n\n          case 14:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}","map":{"version":3,"mappings":"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","names":["WOFF","JPEG","mimes","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","getExtension","url","match","exec","getMimeType","extension","toLowerCase","resolveUrl","baseUrl","window","location","protocol","doc","document","implementation","createHTMLDocument","base","createElement","a","head","appendChild","body","href","isDataUrl","search","makeDataUrl","content","mimeType","parseDataUrlContent","dataURL","split","uuid","counter","random","Math","toString","slice","delay","ms","args","Promise","resolve","setTimeout","toArray","arrayLike","arr","i","l","length","push","px","node","styleProperty","val","getComputedStyle","getPropertyValue","parseFloat","replace","getNodeWidth","leftBorder","rightBorder","clientWidth","getNodeHeight","topBorder","bottomBorder","clientHeight","getPixelRatio","ratio","FINAL_PROCESS","process","e","env","devicePixelRatio","parseInt","Number","isNaN","canvasToBlob","canvas","toBlob","binaryString","atob","toDataURL","len","binaryArray","Uint8Array","charCodeAt","Blob","type","createImage","reject","img","Image","onload","onerror","crossOrigin","decoding","src","svgToDataURL","then","XMLSerializer","serializeToString","encodeURIComponent","html","nodeToDataURL","width","height","xmlns","createElementNS","foreignObject","setAttribute"],"sources":["../src/util.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}