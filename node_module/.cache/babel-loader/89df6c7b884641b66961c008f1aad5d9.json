{"ast":null,"code":"import React,{Fragment}from'react';import{Dialog,Transition}from'@headlessui/react';import{toPng}from'html-to-image';import{jsPDF}from'jspdf';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InvoiceModal=function InvoiceModal(_ref){var isOpen=_ref.isOpen,setIsOpen=_ref.setIsOpen,invoiceInfo=_ref.invoiceInfo,items=_ref.items,onAddNextInvoice=_ref.onAddNextInvoice;function closeModal(){setIsOpen(false);}var addNextInvoiceHandler=function addNextInvoiceHandler(){setIsOpen(false);onAddNextInvoice();};var SaveAsPDFHandler=function SaveAsPDFHandler(){var dom=document.getElementById('print');toPng(dom).then(function(dataUrl){var img=new Image();img.crossOrigin='annoymous';img.src=dataUrl;img.onload=function(){// Initialize the PDF.\nvar pdf=new jsPDF({orientation:'portrait',unit:'in',format:[5.5,8.5]});// Define reused data\nvar imgProps=pdf.getImageProperties(img);var imageType=imgProps.fileType;var pdfWidth=pdf.internal.pageSize.getWidth();// Calculate the number of pages.\nvar pxFullHeight=imgProps.height;var pxPageHeight=Math.floor(imgProps.width*8.5/5.5);var nPages=Math.ceil(pxFullHeight/pxPageHeight);// Define pageHeight separately so it can be trimmed on the final page.\nvar pageHeight=pdf.internal.pageSize.getHeight();// Create a one-page canvas to split up the full image.\nvar pageCanvas=document.createElement('canvas');var pageCtx=pageCanvas.getContext('2d');pageCanvas.width=imgProps.width;pageCanvas.height=pxPageHeight;for(var page=0;page<nPages;page++){// Trim the final page to reduce file size.\nif(page===nPages-1&&pxFullHeight%pxPageHeight!==0){pageCanvas.height=pxFullHeight%pxPageHeight;pageHeight=pageCanvas.height*pdfWidth/pageCanvas.width;}// Display the page.\nvar w=pageCanvas.width;var h=pageCanvas.height;pageCtx.fillStyle='white';pageCtx.fillRect(0,0,w,h);pageCtx.drawImage(img,0,page*pxPageHeight,w,h,0,0,w,h);// Add the page to the PDF.\nif(page)pdf.addPage();var imgData=pageCanvas.toDataURL(\"image/\".concat(imageType),1);pdf.addImage(imgData,imageType,0,0,pdfWidth,pageHeight);}// Output / Save\npdf.save(\"invoice-\".concat(invoiceInfo.invoiceNumber,\".pdf\"));};}).catch(function(error){console.error('oops, something went wrong!',error);});};return/*#__PURE__*/_jsx(Transition,{appear:true,show:isOpen,as:Fragment,children:/*#__PURE__*/_jsx(Dialog,{as:\"div\",className:\"fixed inset-0 z-10 overflow-y-auto\",onClose:closeModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen px-4 text-center\",children:[/*#__PURE__*/_jsx(Transition.Child,{as:Fragment,enter:\"ease-out duration-300\",enterFrom:\"opacity-0\",enterTo:\"opacity-100\",leave:\"ease-in duration-200\",leaveFrom:\"opacity-100\",leaveTo:\"opacity-0\",children:/*#__PURE__*/_jsx(Dialog.Overlay,{className:\"fixed inset-0 bg-black/50\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block h-screen align-middle\",\"aria-hidden\":\"true\",children:\"\\u200B\"}),/*#__PURE__*/_jsx(Transition.Child,{as:Fragment,enter:\"ease-out duration-300\",enterFrom:\"opacity-0 scale-95\",enterTo:\"opacity-100 scale-100\",leave:\"ease-in duration-200\",leaveFrom:\"opacity-100 scale-100\",leaveTo:\"opacity-0 scale-95\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"my-8 inline-block w-full max-w-md transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",id:\"print\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center text-lg font-bold text-gray-900\",children:\"INVOICE\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 grid grid-cols-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Invoice Number:\"}),/*#__PURE__*/_jsx(\"span\",{children:invoiceInfo.invoiceNumber}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Cashier:\"}),/*#__PURE__*/_jsx(\"span\",{children:invoiceInfo.cashierName}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Customer:\"}),/*#__PURE__*/_jsx(\"span\",{children:invoiceInfo.customerName})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-left\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-y border-black/10 text-sm md:text-base\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"ITEM\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"QTY\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right\",children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right\",children:\"AMOUNT\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"w-full\",children:item.name}),/*#__PURE__*/_jsx(\"td\",{className:\"min-w-[50px] text-center\",children:item.qty}),/*#__PURE__*/_jsxs(\"td\",{className:\"min-w-[80px] text-right\",children:[\"$\",Number(item.price).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"min-w-[90px] text-right\",children:[\"$\",Number(item.price*item.qty).toFixed(2)]})]},item.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col items-end space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full justify-between border-t border-black/10 pt-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Subtotal:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",invoiceInfo.subtotal.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Discount:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",invoiceInfo.discountRate.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Tax:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",invoiceInfo.taxRate.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full justify-between border-t border-black/10 py-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold\",children:[\"$\",invoiceInfo.total%1===0?invoiceInfo.total:invoiceInfo.total.toFixed(2)]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex space-x-2 px-4 pb-6\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex w-full items-center justify-center space-x-1 rounded-md border border-blue-500 py-2 text-sm text-blue-500 shadow-sm hover:bg-blue-500 hover:text-white\",onClick:SaveAsPDFHandler,children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Download\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:addNextInvoiceHandler,className:\"flex w-full items-center justify-center space-x-1 rounded-md bg-blue-500 py-2 text-sm text-white shadow-sm hover:bg-blue-600\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 5l7 7-7 7M5 5l7 7-7 7\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Next\"})]})]})]})})]})})});};export default InvoiceModal;","map":{"version":3,"sources":["D:/XIE/MAD/n2/invoice-generator/src/components/InvoiceModal.jsx"],"names":["React","Fragment","Dialog","Transition","toPng","jsPDF","InvoiceModal","isOpen","setIsOpen","invoiceInfo","items","onAddNextInvoice","closeModal","addNextInvoiceHandler","SaveAsPDFHandler","dom","document","getElementById","then","dataUrl","img","Image","crossOrigin","src","onload","pdf","orientation","unit","format","imgProps","getImageProperties","imageType","fileType","pdfWidth","internal","pageSize","getWidth","pxFullHeight","height","pxPageHeight","Math","floor","width","nPages","ceil","pageHeight","getHeight","pageCanvas","createElement","pageCtx","getContext","page","w","h","fillStyle","fillRect","drawImage","addPage","imgData","toDataURL","addImage","save","invoiceNumber","catch","error","console","cashierName","customerName","map","item","name","qty","Number","price","toFixed","id","subtotal","discountRate","taxRate","total"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react';\r\nimport { Dialog, Transition } from '@headlessui/react';\r\nimport { toPng } from 'html-to-image';\r\nimport { jsPDF } from 'jspdf';\r\n\r\nconst InvoiceModal = ({\r\n  isOpen,\r\n  setIsOpen,\r\n  invoiceInfo,\r\n  items,\r\n  onAddNextInvoice,\r\n}) => {\r\n  function closeModal() {\r\n    setIsOpen(false);\r\n  }\r\n\r\n  const addNextInvoiceHandler = () => {\r\n    setIsOpen(false);\r\n    onAddNextInvoice();\r\n  };\r\n\r\n  const SaveAsPDFHandler = () => {\r\n    const dom = document.getElementById('print');\r\n    toPng(dom)\r\n      .then((dataUrl) => {\r\n        const img = new Image();\r\n        img.crossOrigin = 'annoymous';\r\n        img.src = dataUrl;\r\n        img.onload = () => {\r\n          // Initialize the PDF.\r\n          const pdf = new jsPDF({\r\n            orientation: 'portrait',\r\n            unit: 'in',\r\n            format: [5.5, 8.5],\r\n          });\r\n\r\n          // Define reused data\r\n          const imgProps = pdf.getImageProperties(img);\r\n          const imageType = imgProps.fileType;\r\n          const pdfWidth = pdf.internal.pageSize.getWidth();\r\n\r\n          // Calculate the number of pages.\r\n          const pxFullHeight = imgProps.height;\r\n          const pxPageHeight = Math.floor((imgProps.width * 8.5) / 5.5);\r\n          const nPages = Math.ceil(pxFullHeight / pxPageHeight);\r\n\r\n          // Define pageHeight separately so it can be trimmed on the final page.\r\n          let pageHeight = pdf.internal.pageSize.getHeight();\r\n\r\n          // Create a one-page canvas to split up the full image.\r\n          const pageCanvas = document.createElement('canvas');\r\n          const pageCtx = pageCanvas.getContext('2d');\r\n          pageCanvas.width = imgProps.width;\r\n          pageCanvas.height = pxPageHeight;\r\n\r\n          for (let page = 0; page < nPages; page++) {\r\n            // Trim the final page to reduce file size.\r\n            if (page === nPages - 1 && pxFullHeight % pxPageHeight !== 0) {\r\n              pageCanvas.height = pxFullHeight % pxPageHeight;\r\n              pageHeight = (pageCanvas.height * pdfWidth) / pageCanvas.width;\r\n            }\r\n            // Display the page.\r\n            const w = pageCanvas.width;\r\n            const h = pageCanvas.height;\r\n            pageCtx.fillStyle = 'white';\r\n            pageCtx.fillRect(0, 0, w, h);\r\n            pageCtx.drawImage(img, 0, page * pxPageHeight, w, h, 0, 0, w, h);\r\n\r\n            // Add the page to the PDF.\r\n            if (page) pdf.addPage();\r\n\r\n            const imgData = pageCanvas.toDataURL(`image/${imageType}`, 1);\r\n            pdf.addImage(imgData, imageType, 0, 0, pdfWidth, pageHeight);\r\n          }\r\n          // Output / Save\r\n          pdf.save(`invoice-${invoiceInfo.invoiceNumber}.pdf`);\r\n        };\r\n      })\r\n      .catch((error) => {\r\n        console.error('oops, something went wrong!', error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Transition appear show={isOpen} as={Fragment}>\r\n      <Dialog\r\n        as=\"div\"\r\n        className=\"fixed inset-0 z-10 overflow-y-auto\"\r\n        onClose={closeModal}\r\n      >\r\n        <div className=\"min-h-screen px-4 text-center\">\r\n          <Transition.Child\r\n            as={Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <Dialog.Overlay className=\"fixed inset-0 bg-black/50\" />\r\n          </Transition.Child>\r\n\r\n          {/* This element is to trick the browser into centering the modal contents. */}\r\n          <span\r\n            className=\"inline-block h-screen align-middle\"\r\n            aria-hidden=\"true\"\r\n          >\r\n            &#8203;\r\n          </span>\r\n          <Transition.Child\r\n            as={Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0 scale-95\"\r\n            enterTo=\"opacity-100 scale-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100 scale-100\"\r\n            leaveTo=\"opacity-0 scale-95\"\r\n          >\r\n            <div className=\"my-8 inline-block w-full max-w-md transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all\">\r\n              <div className=\"p-4\" id=\"print\">\r\n                <h1 className=\"text-center text-lg font-bold text-gray-900\">\r\n                  INVOICE\r\n                </h1>\r\n                <div className=\"mt-6\">\r\n                  <div className=\"mb-4 grid grid-cols-2\">\r\n                    <span className=\"font-bold\">Invoice Number:</span>\r\n                    <span>{invoiceInfo.invoiceNumber}</span>\r\n                    <span className=\"font-bold\">Cashier:</span>\r\n                    <span>{invoiceInfo.cashierName}</span>\r\n                    <span className=\"font-bold\">Customer:</span>\r\n                    <span>{invoiceInfo.customerName}</span>\r\n                  </div>\r\n\r\n                  <table className=\"w-full text-left\">\r\n                    <thead>\r\n                      <tr className=\"border-y border-black/10 text-sm md:text-base\">\r\n                        <th>ITEM</th>\r\n                        <th className=\"text-center\">QTY</th>\r\n                        <th className=\"text-right\">PRICE</th>\r\n                        <th className=\"text-right\">AMOUNT</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {items.map((item) => (\r\n                        <tr key={item.id}>\r\n                          <td className=\"w-full\">{item.name}</td>\r\n                          <td className=\"min-w-[50px] text-center\">\r\n                            {item.qty}\r\n                          </td>\r\n                          <td className=\"min-w-[80px] text-right\">\r\n                            ${Number(item.price).toFixed(2)}\r\n                          </td>\r\n                          <td className=\"min-w-[90px] text-right\">\r\n                            ${Number(item.price * item.qty).toFixed(2)}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n\r\n                  <div className=\"mt-4 flex flex-col items-end space-y-2\">\r\n                    <div className=\"flex w-full justify-between border-t border-black/10 pt-2\">\r\n                      <span className=\"font-bold\">Subtotal:</span>\r\n                      <span>${invoiceInfo.subtotal.toFixed(2)}</span>\r\n                    </div>\r\n                    <div className=\"flex w-full justify-between\">\r\n                      <span className=\"font-bold\">Discount:</span>\r\n                      <span>${invoiceInfo.discountRate.toFixed(2)}</span>\r\n                    </div>\r\n                    <div className=\"flex w-full justify-between\">\r\n                      <span className=\"font-bold\">Tax:</span>\r\n                      <span>${invoiceInfo.taxRate.toFixed(2)}</span>\r\n                    </div>\r\n                    <div className=\"flex w-full justify-between border-t border-black/10 py-2\">\r\n                      <span className=\"font-bold\">Total:</span>\r\n                      <span className=\"font-bold\">\r\n                        $\r\n                        {invoiceInfo.total % 1 === 0\r\n                          ? invoiceInfo.total\r\n                          : invoiceInfo.total.toFixed(2)}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-4 flex space-x-2 px-4 pb-6\">\r\n                <button\r\n                  className=\"flex w-full items-center justify-center space-x-1 rounded-md border border-blue-500 py-2 text-sm text-blue-500 shadow-sm hover:bg-blue-500 hover:text-white\"\r\n                  onClick={SaveAsPDFHandler}\r\n                >\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    className=\"h-4 w-4\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\r\n                    />\r\n                  </svg>\r\n                  <span>Download</span>\r\n                </button>\r\n                <button\r\n                  onClick={addNextInvoiceHandler}\r\n                  className=\"flex w-full items-center justify-center space-x-1 rounded-md bg-blue-500 py-2 text-sm text-white shadow-sm hover:bg-blue-600\"\r\n                >\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    className=\"h-4 w-4\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M13 5l7 7-7 7M5 5l7 7-7 7\"\r\n                    />\r\n                  </svg>\r\n                  <span>Next</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </Transition.Child>\r\n        </div>\r\n      </Dialog>\r\n    </Transition>\r\n  );\r\n};\r\n\r\nexport default InvoiceModal;\r\n"]},"metadata":{},"sourceType":"module"}