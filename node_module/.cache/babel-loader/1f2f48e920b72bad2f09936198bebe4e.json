{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Bhargav Ayare\\\\Documents\\\\GitHub\\\\invoice2\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { cloneNode } from './cloneNode';\nimport { embedImages } from './embedImages';\nimport { applyStyleWithOptions } from './applyStyleWithOptions';\nimport { embedWebFonts, getWebFontCSS } from './embedWebFonts';\nimport { getNodeWidth, getNodeHeight, getPixelRatio, createImage, canvasToBlob, nodeToDataURL } from './util';\n\nfunction getImageSize(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var width = options.width || getNodeWidth(node);\n  var height = options.height || getNodeHeight(node);\n  return {\n    width: width,\n    height: height\n  };\n}\n\nexport function toSvg(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _getImageSize, width, height;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _getImageSize = getImageSize(node, options), width = _getImageSize.width, height = _getImageSize.height;\n            return _context.abrupt(\"return\", Promise.resolve(node).then(function (nativeNode) {\n              return cloneNode(nativeNode, options, true);\n            }).then(function (clonedNode) {\n              return embedWebFonts(clonedNode, options);\n            }).then(function (clonedNode) {\n              return embedImages(clonedNode, options);\n            }).then(function (clonedNode) {\n              return applyStyleWithOptions(clonedNode, options);\n            }).then(function (clonedNode) {\n              return nodeToDataURL(clonedNode, width, height);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\nvar dimensionCanvasLimit = 16384; // as per https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas#maximum_canvas_size\n\nfunction checkCanvasDimensions(canvas) {\n  if (canvas.width > dimensionCanvasLimit || canvas.height > dimensionCanvasLimit) {\n    if (canvas.width > dimensionCanvasLimit && canvas.height > dimensionCanvasLimit) {\n      if (canvas.width > canvas.height) {\n        canvas.height *= dimensionCanvasLimit / canvas.width;\n        canvas.width = dimensionCanvasLimit;\n      } else {\n        canvas.width *= dimensionCanvasLimit / canvas.height;\n        canvas.height = dimensionCanvasLimit;\n      }\n    } else if (canvas.width > dimensionCanvasLimit) {\n      canvas.height *= dimensionCanvasLimit / canvas.width;\n      canvas.width = dimensionCanvasLimit;\n    } else {\n      canvas.width *= dimensionCanvasLimit / canvas.height;\n      canvas.height = dimensionCanvasLimit;\n    }\n  }\n}\n\nexport function toCanvas(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", toSvg(node, options).then(createImage).then(function (img) {\n              var canvas = document.createElement('canvas');\n              var context = canvas.getContext('2d');\n              var ratio = options.pixelRatio || getPixelRatio();\n\n              var _getImageSize2 = getImageSize(node, options),\n                  width = _getImageSize2.width,\n                  height = _getImageSize2.height;\n\n              var canvasWidth = options.canvasWidth || width;\n              var canvasHeight = options.canvasHeight || height;\n              canvas.width = canvasWidth * ratio;\n              canvas.height = canvasHeight * ratio;\n\n              if (!options.skipAutoScale) {\n                checkCanvasDimensions(canvas);\n              }\n\n              canvas.style.width = \"\".concat(canvasWidth);\n              canvas.style.height = \"\".concat(canvasHeight);\n\n              if (options.backgroundColor) {\n                context.fillStyle = options.backgroundColor;\n                context.fillRect(0, 0, canvas.width, canvas.height);\n              }\n\n              context.drawImage(img, 0, 0, canvas.width, canvas.height);\n              return canvas;\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\nexport function toPixelData(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var _getImageSize3, width, height;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _getImageSize3 = getImageSize(node, options), width = _getImageSize3.width, height = _getImageSize3.height;\n            return _context3.abrupt(\"return\", toCanvas(node, options).then(function (canvas) {\n              var ctx = canvas.getContext('2d');\n              return ctx.getImageData(0, 0, width, height).data;\n            }));\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}\nexport function toPng(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            return _context4.abrupt(\"return\", toCanvas(node, options).then(function (canvas) {\n              return canvas.toDataURL();\n            }));\n\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n}\nexport function toJpeg(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            return _context5.abrupt(\"return\", toCanvas(node, options).then(function (canvas) {\n              return canvas.toDataURL('image/jpeg', options.quality || 1);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n}\nexport function toBlob(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            return _context6.abrupt(\"return\", toCanvas(node, options).then(canvasToBlob));\n\n          case 1:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n}\nexport function getFontEmbedCSS(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            return _context7.abrupt(\"return\", getWebFontCSS(node, options));\n\n          case 1:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n}","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,SAASA,SAAT,QAA0B,aAA1B;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,qBAAT,QAAsC,yBAAtC;AACA,SAASC,aAAT,EAAwBC,aAAxB,QAA6C,iBAA7C;AACA,SACEC,YADF,EAEEC,aAFF,EAGEC,aAHF,EAIEC,WAJF,EAKEC,YALF,EAMEC,aANF,QAOO,QAPP;;AASA,SAASC,YAAT,CAAsBC,IAAtB,EAA8D;AAAA,MAArBC,OAAqB,uEAAF,EAAE;AAC5D,MAAMC,KAAK,GAAGD,OAAO,CAACC,KAAR,IAAiBT,YAAY,CAACO,IAAD,CAA3C;AACA,MAAMG,MAAM,GAAGF,OAAO,CAACE,MAAR,IAAkBT,aAAa,CAACM,IAAD,CAA9C;AAEA,SAAO;AAAEE,SAAK,EAALA,KAAF;AAASC,UAAM,EAANA;AAAT,GAAP;AACD;;AAED,OAAM,SAAgBC,KAAhB,CACJJ,IADI,EAEiB;AAAA,MAArBC,OAAqB,uEAAF,EAAE;;;;;;;;4BAEKF,YAAY,CAACC,IAAD,EAAOC,OAAP,GAA9BC,6BAAOC;6CAERE,OAAO,CAACC,OAAR,CAAgBN,IAAhB,EACJO,IADI,CACC,UAACC,UAAD;AAAA,qBAAgBpB,SAAS,CAACoB,UAAD,EAAaP,OAAb,EAAsB,IAAtB,CAAzB;AAAA,aADD,EAEJM,IAFI,CAEC,UAACE,UAAD;AAAA,qBAAgBlB,aAAa,CAACkB,UAAD,EAAcR,OAAd,CAA7B;AAAA,aAFD,EAGJM,IAHI,CAGC,UAACE,UAAD;AAAA,qBAAgBpB,WAAW,CAACoB,UAAD,EAAaR,OAAb,CAA3B;AAAA,aAHD,EAIJM,IAJI,CAIC,UAACE,UAAD;AAAA,qBAAgBnB,qBAAqB,CAACmB,UAAD,EAAaR,OAAb,CAArC;AAAA,aAJD,EAKJM,IALI,CAKC,UAACE,UAAD;AAAA,qBAAgBX,aAAa,CAACW,UAAD,EAAaP,KAAb,EAAoBC,MAApB,CAA7B;AAAA,aALD;;;;;;;;;AAMR;AAED,IAAMO,oBAAoB,GAAG,KAA7B,C,CAAmC;;AAEnC,SAASC,qBAAT,CAA+BC,MAA/B,EAAwD;AACtD,MACEA,MAAM,CAACV,KAAP,GAAeQ,oBAAf,IACAE,MAAM,CAACT,MAAP,GAAgBO,oBAFlB,EAGE;AACA,QACEE,MAAM,CAACV,KAAP,GAAeQ,oBAAf,IACAE,MAAM,CAACT,MAAP,GAAgBO,oBAFlB,EAGE;AACA,UAAIE,MAAM,CAACV,KAAP,GAAeU,MAAM,CAACT,MAA1B,EAAkC;AAChCS,cAAM,CAACT,MAAP,IAAiBO,oBAAoB,GAAGE,MAAM,CAACV,KAA/C;AACAU,cAAM,CAACV,KAAP,GAAeQ,oBAAf;AACD,OAHD,MAGO;AACLE,cAAM,CAACV,KAAP,IAAgBQ,oBAAoB,GAAGE,MAAM,CAACT,MAA9C;AACAS,cAAM,CAACT,MAAP,GAAgBO,oBAAhB;AACD;AACF,KAXD,MAWO,IAAIE,MAAM,CAACV,KAAP,GAAeQ,oBAAnB,EAAyC;AAC9CE,YAAM,CAACT,MAAP,IAAiBO,oBAAoB,GAAGE,MAAM,CAACV,KAA/C;AACAU,YAAM,CAACV,KAAP,GAAeQ,oBAAf;AACD,KAHM,MAGA;AACLE,YAAM,CAACV,KAAP,IAAgBQ,oBAAoB,GAAGE,MAAM,CAACT,MAA9C;AACAS,YAAM,CAACT,MAAP,GAAgBO,oBAAhB;AACD;AACF;AACF;;AACD,OAAM,SAAgBG,QAAhB,CACJb,IADI,EAEiB;AAAA,MAArBC,OAAqB,uEAAF,EAAE;;;;;;8CAEdG,KAAK,CAACJ,IAAD,EAAOC,OAAP,CAAL,CACJM,IADI,CACCX,WADD,EAEJW,IAFI,CAEC,UAACO,GAAD,EAAQ;AACZ,kBAAMF,MAAM,GAAGG,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACA,kBAAMC,OAAO,GAAGL,MAAM,CAACM,UAAP,CAAkB,IAAlB,CAAhB;AACA,kBAAMC,KAAK,GAAGlB,OAAO,CAACmB,UAAR,IAAsBzB,aAAa,EAAjD;;AACA,mCAA0BI,YAAY,CAACC,IAAD,EAAOC,OAAP,CAAtC;AAAA,kBAAQC,KAAR,kBAAQA,KAAR;AAAA,kBAAeC,MAAf,kBAAeA,MAAf;;AAEA,kBAAMkB,WAAW,GAAGpB,OAAO,CAACoB,WAAR,IAAuBnB,KAA3C;AACA,kBAAMoB,YAAY,GAAGrB,OAAO,CAACqB,YAAR,IAAwBnB,MAA7C;AAEAS,oBAAM,CAACV,KAAP,GAAemB,WAAW,GAAGF,KAA7B;AACAP,oBAAM,CAACT,MAAP,GAAgBmB,YAAY,GAAGH,KAA/B;;AAEA,kBAAI,CAAClB,OAAO,CAACsB,aAAb,EAA4B;AAC1BZ,qCAAqB,CAACC,MAAD,CAArB;AACD;;AACDA,oBAAM,CAACY,KAAP,CAAatB,KAAb,aAAwBmB,WAAxB;AACAT,oBAAM,CAACY,KAAP,CAAarB,MAAb,aAAyBmB,YAAzB;;AAEA,kBAAIrB,OAAO,CAACwB,eAAZ,EAA6B;AAC3BR,uBAAO,CAACS,SAAR,GAAoBzB,OAAO,CAACwB,eAA5B;AACAR,uBAAO,CAACU,QAAR,CAAiB,CAAjB,EAAoB,CAApB,EAAuBf,MAAM,CAACV,KAA9B,EAAqCU,MAAM,CAACT,MAA5C;AACD;;AAEDc,qBAAO,CAACW,SAAR,CAAkBd,GAAlB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6BF,MAAM,CAACV,KAApC,EAA2CU,MAAM,CAACT,MAAlD;AAEA,qBAAOS,MAAP;AACD,aA5BI;;;;;;;;;AA6BR;AAED,OAAM,SAAgBiB,WAAhB,CACJ7B,IADI,EAEiB;AAAA,MAArBC,OAAqB,uEAAF,EAAE;;;;;;;;6BAEKF,YAAY,CAACC,IAAD,EAAOC,OAAP,GAA9BC,8BAAOC;8CACRU,QAAQ,CAACb,IAAD,EAAOC,OAAP,CAAR,CAAwBM,IAAxB,CAA6B,UAACK,MAAD,EAAW;AAC7C,kBAAMkB,GAAG,GAAGlB,MAAM,CAACM,UAAP,CAAkB,IAAlB,CAAZ;AACA,qBAAOY,GAAG,CAACC,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB7B,KAAvB,EAA8BC,MAA9B,EAAsC6B,IAA7C;AACD,aAHM;;;;;;;;;AAIR;AAED,OAAM,SAAgBC,KAAhB,CACJjC,IADI,EAEiB;AAAA,MAArBC,OAAqB,uEAAF,EAAE;;;;;;8CAEdY,QAAQ,CAACb,IAAD,EAAOC,OAAP,CAAR,CAAwBM,IAAxB,CAA6B,UAACK,MAAD;AAAA,qBAAYA,MAAM,CAACsB,SAAP,EAAZ;AAAA,aAA7B;;;;;;;;;AACR;AAED,OAAM,SAAgBC,MAAhB,CACJnC,IADI,EAEiB;AAAA,MAArBC,OAAqB,uEAAF,EAAE;;;;;;8CAEdY,QAAQ,CAACb,IAAD,EAAOC,OAAP,CAAR,CAAwBM,IAAxB,CAA6B,UAACK,MAAD;AAAA,qBAClCA,MAAM,CAACsB,SAAP,CAAiB,YAAjB,EAA+BjC,OAAO,CAACmC,OAAR,IAAmB,CAAlD,CADkC;AAAA,aAA7B;;;;;;;;;AAGR;AAED,OAAM,SAAgBC,MAAhB,CACJrC,IADI,EAEiB;AAAA,MAArBC,OAAqB,uEAAF,EAAE;;;;;;8CAEdY,QAAQ,CAACb,IAAD,EAAOC,OAAP,CAAR,CAAwBM,IAAxB,CAA6BV,YAA7B;;;;;;;;;AACR;AAED,OAAM,SAAgByC,eAAhB,CACJtC,IADI,EAEiB;AAAA,MAArBC,OAAqB,uEAAF,EAAE;;;;;;8CAEdT,aAAa,CAACQ,IAAD,EAAOC,OAAP;;;;;;;;;AACrB","names":["cloneNode","embedImages","applyStyleWithOptions","embedWebFonts","getWebFontCSS","getNodeWidth","getNodeHeight","getPixelRatio","createImage","canvasToBlob","nodeToDataURL","getImageSize","node","options","width","height","toSvg","Promise","resolve","then","nativeNode","clonedNode","dimensionCanvasLimit","checkCanvasDimensions","canvas","toCanvas","img","document","createElement","context","getContext","ratio","pixelRatio","canvasWidth","canvasHeight","skipAutoScale","style","backgroundColor","fillStyle","fillRect","drawImage","toPixelData","ctx","getImageData","data","toPng","toDataURL","toJpeg","quality","toBlob","getFontEmbedCSS"],"sources":["../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}