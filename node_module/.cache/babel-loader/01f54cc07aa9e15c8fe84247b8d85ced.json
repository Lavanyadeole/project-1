{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Bhargav Ayare/Documents/GitHub/invoice2/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Bhargav Ayare/Documents/GitHub/invoice2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{uid}from'uid';import InvoiceItem from'./InvoiceItem';import InvoiceModal from'./InvoiceModal';import incrementString from'../helpers/incrementString';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var date=new Date();var today=date.toLocaleDateString('en-GB',{month:'numeric',day:'numeric',year:'numeric'});var InvoiceForm=function InvoiceForm(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),discount=_useState4[0],setDiscount=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),tax=_useState6[0],setTax=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),invoiceNumber=_useState8[0],setInvoiceNumber=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),cashierName=_useState10[0],setCashierName=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),customerName=_useState12[0],setCustomerName=_useState12[1];var _useState13=useState([{id:uid(6),name:'',qty:1,price:'1.00'}]),_useState14=_slicedToArray(_useState13,2),items=_useState14[0],setItems=_useState14[1];var reviewInvoiceHandler=function reviewInvoiceHandler(event){event.preventDefault();setIsOpen(true);};var addNextInvoiceHandler=function addNextInvoiceHandler(){setInvoiceNumber(function(prevNumber){return incrementString(prevNumber);});setItems([{id:uid(6),name:'',qty:1,price:'1.00'}]);};var addItemHandler=function addItemHandler(){var id=uid(6);setItems(function(prevItem){return[].concat(_toConsumableArray(prevItem),[{id:id,name:'',qty:1,price:'1.00'}]);});};var deleteItemHandler=function deleteItemHandler(id){setItems(function(prevItem){return prevItem.filter(function(item){return item.id!==id;});});};var edtiItemHandler=function edtiItemHandler(event){var editedItem={id:event.target.id,name:event.target.name,value:event.target.value};var newItems=items.map(function(items){for(var key in items){if(key===editedItem.name&&items.id===editedItem.id){items[key]=editedItem.value;}}return items;});setItems(newItems);};var subtotal=items.reduce(function(prev,curr){if(curr.name.trim().length>0)return prev+Number(curr.price*Math.floor(curr.qty));else return prev;},0);var taxRate=tax*subtotal/100;var discountRate=discount*subtotal/100;var total=subtotal-discountRate+taxRate;return/*#__PURE__*/_jsxs(\"form\",{className:\"relative flex flex-col px-2 md:flex-row\",onSubmit:reviewInvoiceHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"my-6 flex-1 space-y-2  rounded-md bg-white p-4 shadow-sm sm:space-y-4 md:p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-between space-y-2 border-b border-gray-900/10 pb-4 md:flex-row md:items-center md:space-y-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Current Date: \"}),/*#__PURE__*/_jsx(\"span\",{children:today})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-bold\",htmlFor:\"invoiceNumber\",children:\"Invoice Number:\"}),/*#__PURE__*/_jsx(\"input\",{required:true,className:\"max-w-[130px]\",type:\"number\",name:\"invoiceNumber\",id:\"invoiceNumber\",min:\"1\",step:\"1\",value:invoiceNumber,onChange:function onChange(event){return setInvoiceNumber(event.target.value);}})]})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-center text-lg font-bold\",children:\"INVOICE\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2 pt-4 pb-8\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cashierName\",className:\"text-sm font-bold sm:text-base\",children:\"Cashier:\"}),/*#__PURE__*/_jsx(\"input\",{required:true,className:\"flex-1\",placeholder:\"Cashier name\",type:\"text\",name:\"cashierName\",id:\"cashierName\",value:cashierName,onChange:function onChange(event){return setCashierName(event.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"customerName\",className:\"col-start-2 row-start-1 text-sm font-bold md:text-base\",children:\"Customer:\"}),/*#__PURE__*/_jsx(\"input\",{required:true,className:\"flex-1\",placeholder:\"Customer name\",type:\"text\",name:\"customerName\",id:\"customerName\",value:customerName,onChange:function onChange(event){return setCustomerName(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full p-4 text-left\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-900/10 text-sm md:text-base\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"ITEM\"}),/*#__PURE__*/_jsx(\"th\",{children:\"QTY\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"ACTION\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map(function(item){return/*#__PURE__*/_jsx(InvoiceItem,{id:item.id,name:item.name,qty:item.qty,price:item.price,onDeleteItem:deleteItemHandler,onEdtiItem:edtiItemHandler},item.id);})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"rounded-md bg-blue-500 px-4 py-2 text-sm text-white shadow-sm hover:bg-blue-600\",type:\"button\",onClick:addItemHandler,children:\"Add Item\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-end space-y-2 pt-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full justify-between md:w-1/2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Subtotal:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",subtotal.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full justify-between md:w-1/2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Discount:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"(\",discount||'0',\"%)$\",discountRate.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full justify-between md:w-1/2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Tax:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"(\",tax||'0',\"%)$\",taxRate.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full justify-between border-t border-gray-900/10 pt-2 md:w-1/2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold\",children:[\"$\",total%1===0?total:total.toFixed(2)]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"basis-1/4 bg-transparent\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sticky top-0 z-10 space-y-4 divide-y divide-gray-900/10 pb-8 md:pt-6 md:pl-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"w-full rounded-md bg-blue-500 py-2 text-sm text-white shadow-sm hover:bg-blue-600\",type:\"submit\",children:\"Review Invoice\"}),/*#__PURE__*/_jsx(InvoiceModal,{isOpen:isOpen,setIsOpen:setIsOpen,invoiceInfo:{invoiceNumber:invoiceNumber,cashierName:cashierName,customerName:customerName,subtotal:subtotal,taxRate:taxRate,discountRate:discountRate,total:total},items:items,onAddNextInvoice:addNextInvoiceHandler}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 py-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-bold md:text-base\",htmlFor:\"tax\",children:\"Tax rate:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"w-full rounded-r-none bg-white shadow-sm\",type:\"number\",name:\"tax\",id:\"tax\",min:\"0.01\",step:\"0.01\",placeholder:\"0.0\",value:tax,onChange:function onChange(event){return setTax(event.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"rounded-r-md bg-gray-200 py-2 px-4 text-gray-500 shadow-sm\",children:\"%\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-bold md:text-base\",htmlFor:\"discount\",children:\"Discount rate:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"w-full rounded-r-none bg-white shadow-sm\",type:\"number\",name:\"discount\",id:\"discount\",min:\"0\",step:\"0.01\",placeholder:\"0.0\",value:discount,onChange:function onChange(event){return setDiscount(event.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"rounded-r-md bg-gray-200 py-2 px-4 text-gray-500 shadow-sm\",children:\"%\"})]})]})]})]})})]});};export default InvoiceForm;","map":{"version":3,"sources":["C:/Users/Bhargav Ayare/Documents/GitHub/invoice2/src/components/InvoiceForm.jsx"],"names":["React","useState","uid","InvoiceItem","InvoiceModal","incrementString","date","Date","today","toLocaleDateString","month","day","year","InvoiceForm","isOpen","setIsOpen","discount","setDiscount","tax","setTax","invoiceNumber","setInvoiceNumber","cashierName","setCashierName","customerName","setCustomerName","id","name","qty","price","items","setItems","reviewInvoiceHandler","event","preventDefault","addNextInvoiceHandler","prevNumber","addItemHandler","prevItem","deleteItemHandler","filter","item","edtiItemHandler","editedItem","target","value","newItems","map","key","subtotal","reduce","prev","curr","trim","length","Number","Math","floor","taxRate","discountRate","total","toFixed"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { uid } from 'uid';\r\nimport InvoiceItem from './InvoiceItem';\r\nimport InvoiceModal from './InvoiceModal';\r\nimport incrementString from '../helpers/incrementString';\r\nconst date = new Date();\r\nconst today = date.toLocaleDateString('en-GB', {\r\n  month: 'numeric',\r\n  day: 'numeric',\r\n  year: 'numeric',\r\n});\r\n\r\nconst InvoiceForm = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [discount, setDiscount] = useState('');\r\n  const [tax, setTax] = useState('');\r\n  const [invoiceNumber, setInvoiceNumber] = useState(1);\r\n  const [cashierName, setCashierName] = useState('');\r\n  const [customerName, setCustomerName] = useState('');\r\n  const [items, setItems] = useState([\r\n    {\r\n      id: uid(6),\r\n      name: '',\r\n      qty: 1,\r\n      price: '1.00',\r\n    },\r\n  ]);\r\n\r\n  const reviewInvoiceHandler = (event) => {\r\n    event.preventDefault();\r\n    setIsOpen(true);\r\n  };\r\n\r\n  const addNextInvoiceHandler = () => {\r\n    setInvoiceNumber((prevNumber) => incrementString(prevNumber));\r\n    setItems([\r\n      {\r\n        id: uid(6),\r\n        name: '',\r\n        qty: 1,\r\n        price: '1.00',\r\n      },\r\n    ]);\r\n  };\r\n\r\n  const addItemHandler = () => {\r\n    const id = uid(6);\r\n    setItems((prevItem) => [\r\n      ...prevItem,\r\n      {\r\n        id: id,\r\n        name: '',\r\n        qty: 1,\r\n        price: '1.00',\r\n      },\r\n    ]);\r\n  };\r\n\r\n  const deleteItemHandler = (id) => {\r\n    setItems((prevItem) => prevItem.filter((item) => item.id !== id));\r\n  };\r\n\r\n  const edtiItemHandler = (event) => {\r\n    const editedItem = {\r\n      id: event.target.id,\r\n      name: event.target.name,\r\n      value: event.target.value,\r\n    };\r\n\r\n    const newItems = items.map((items) => {\r\n      for (const key in items) {\r\n        if (key === editedItem.name && items.id === editedItem.id) {\r\n          items[key] = editedItem.value;\r\n        }\r\n      }\r\n      return items;\r\n    });\r\n\r\n    setItems(newItems);\r\n  };\r\n\r\n  const subtotal = items.reduce((prev, curr) => {\r\n    if (curr.name.trim().length > 0)\r\n      return prev + Number(curr.price * Math.floor(curr.qty));\r\n    else return prev;\r\n  }, 0);\r\n  const taxRate = (tax * subtotal) / 100;\r\n  const discountRate = (discount * subtotal) / 100;\r\n  const total = subtotal - discountRate + taxRate;\r\n\r\n  return (\r\n    <form\r\n      className=\"relative flex flex-col px-2 md:flex-row\"\r\n      onSubmit={reviewInvoiceHandler}\r\n    >\r\n      <div className=\"my-6 flex-1 space-y-2  rounded-md bg-white p-4 shadow-sm sm:space-y-4 md:p-6\">\r\n        <div className=\"flex flex-col justify-between space-y-2 border-b border-gray-900/10 pb-4 md:flex-row md:items-center md:space-y-0\">\r\n          <div className=\"flex space-x-2\">\r\n            <span className=\"font-bold\">Current Date: </span>\r\n            <span>{today}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <label className=\"font-bold\" htmlFor=\"invoiceNumber\">\r\n              Invoice Number:\r\n            </label>\r\n            <input\r\n              required\r\n              className=\"max-w-[130px]\"\r\n              type=\"number\"\r\n              name=\"invoiceNumber\"\r\n              id=\"invoiceNumber\"\r\n              min=\"1\"\r\n              step=\"1\"\r\n              value={invoiceNumber}\r\n              onChange={(event) => setInvoiceNumber(event.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <h1 className=\"text-center text-lg font-bold\">INVOICE</h1>\r\n        <div className=\"grid grid-cols-2 gap-2 pt-4 pb-8\">\r\n          <label\r\n            htmlFor=\"cashierName\"\r\n            className=\"text-sm font-bold sm:text-base\"\r\n          >\r\n            Cashier:\r\n          </label>\r\n          <input\r\n            required\r\n            className=\"flex-1\"\r\n            placeholder=\"Cashier name\"\r\n            type=\"text\"\r\n            name=\"cashierName\"\r\n            id=\"cashierName\"\r\n            value={cashierName}\r\n            onChange={(event) => setCashierName(event.target.value)}\r\n          />\r\n          <label\r\n            htmlFor=\"customerName\"\r\n            className=\"col-start-2 row-start-1 text-sm font-bold md:text-base\"\r\n          >\r\n            Customer:\r\n          </label>\r\n          <input\r\n            required\r\n            className=\"flex-1\"\r\n            placeholder=\"Customer name\"\r\n            type=\"text\"\r\n            name=\"customerName\"\r\n            id=\"customerName\"\r\n            value={customerName}\r\n            onChange={(event) => setCustomerName(event.target.value)}\r\n          />\r\n        </div>\r\n        <table className=\"w-full p-4 text-left\">\r\n          <thead>\r\n            <tr className=\"border-b border-gray-900/10 text-sm md:text-base\">\r\n              <th>ITEM</th>\r\n              <th>QTY</th>\r\n              <th className=\"text-center\">PRICE</th>\r\n              <th className=\"text-center\">ACTION</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {items.map((item) => (\r\n              <InvoiceItem\r\n                key={item.id}\r\n                id={item.id}\r\n                name={item.name}\r\n                qty={item.qty}\r\n                price={item.price}\r\n                onDeleteItem={deleteItemHandler}\r\n                onEdtiItem={edtiItemHandler}\r\n              />\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        <button\r\n          className=\"rounded-md bg-blue-500 px-4 py-2 text-sm text-white shadow-sm hover:bg-blue-600\"\r\n          type=\"button\"\r\n          onClick={addItemHandler}\r\n        >\r\n          Add Item\r\n        </button>\r\n        <div className=\"flex flex-col items-end space-y-2 pt-6\">\r\n          <div className=\"flex w-full justify-between md:w-1/2\">\r\n            <span className=\"font-bold\">Subtotal:</span>\r\n            <span>${subtotal.toFixed(2)}</span>\r\n          </div>\r\n          <div className=\"flex w-full justify-between md:w-1/2\">\r\n            <span className=\"font-bold\">Discount:</span>\r\n            <span>\r\n              ({discount || '0'}%)${discountRate.toFixed(2)}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex w-full justify-between md:w-1/2\">\r\n            <span className=\"font-bold\">Tax:</span>\r\n            <span>\r\n              ({tax || '0'}%)${taxRate.toFixed(2)}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex w-full justify-between border-t border-gray-900/10 pt-2 md:w-1/2\">\r\n            <span className=\"font-bold\">Total:</span>\r\n            <span className=\"font-bold\">\r\n              ${total % 1 === 0 ? total : total.toFixed(2)}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"basis-1/4 bg-transparent\">\r\n        <div className=\"sticky top-0 z-10 space-y-4 divide-y divide-gray-900/10 pb-8 md:pt-6 md:pl-4\">\r\n          <button\r\n            className=\"w-full rounded-md bg-blue-500 py-2 text-sm text-white shadow-sm hover:bg-blue-600\"\r\n            type=\"submit\"\r\n          >\r\n            Review Invoice\r\n          </button>\r\n          <InvoiceModal\r\n            isOpen={isOpen}\r\n            setIsOpen={setIsOpen}\r\n            invoiceInfo={{\r\n              invoiceNumber,\r\n              cashierName,\r\n              customerName,\r\n              subtotal,\r\n              taxRate,\r\n              discountRate,\r\n              total,\r\n            }}\r\n            items={items}\r\n            onAddNextInvoice={addNextInvoiceHandler}\r\n          />\r\n          <div className=\"space-y-4 py-2\">\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-bold md:text-base\" htmlFor=\"tax\">\r\n                Tax rate:\r\n              </label>\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  className=\"w-full rounded-r-none bg-white shadow-sm\"\r\n                  type=\"number\"\r\n                  name=\"tax\"\r\n                  id=\"tax\"\r\n                  min=\"0.01\"\r\n                  step=\"0.01\"\r\n                  placeholder=\"0.0\"\r\n                  value={tax}\r\n                  onChange={(event) => setTax(event.target.value)}\r\n                />\r\n                <span className=\"rounded-r-md bg-gray-200 py-2 px-4 text-gray-500 shadow-sm\">\r\n                  %\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <label\r\n                className=\"text-sm font-bold md:text-base\"\r\n                htmlFor=\"discount\"\r\n              >\r\n                Discount rate:\r\n              </label>\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  className=\"w-full rounded-r-none bg-white shadow-sm\"\r\n                  type=\"number\"\r\n                  name=\"discount\"\r\n                  id=\"discount\"\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                  placeholder=\"0.0\"\r\n                  value={discount}\r\n                  onChange={(event) => setDiscount(event.target.value)}\r\n                />\r\n                <span className=\"rounded-r-md bg-gray-200 py-2 px-4 text-gray-500 shadow-sm\">\r\n                  %\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default InvoiceForm;\r\n"]},"metadata":{},"sourceType":"module"}